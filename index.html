<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hello</title>
  
  <!-- Google font m·ªÅm m·∫°i n·ªØ t√≠nh -->
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet" />

  <style>
    /* Reset c∆° b·∫£n */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: #ffe6f0; /* m√†u h·ªìng pastel nh·∫°t */
      font-family: 'Comfortaa', cursive, sans-serif;
      color: #6a1b4d;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 0px;
    }

    h2 {
      margin-bottom: 10px;
	  margin-top: 20px;
      font-weight: 600;
      font-size: 2rem;
      text-align: center;
      color: #b93f6b;
    }

    #editor {
      width: 100%;
      max-width: 1450px;
      height: 900px;
      background: #fff0f6;
      border: 2px solid #f8bbd0;
      border-radius: 15px;
      padding: 20px;
      font-size: 14px;
      color: #4a004e;
      box-shadow: 0 4px 12px rgba(219, 112, 147, 0.3);
      outline: none;
      overflow-y: auto;
      resize: vertical;
      transition: border-color 0.3s ease;
    }
    #editor:focus {
      border-color: #ec407a;
      box-shadow: 0 0 8px 2px #f48fb1;
    }

    #status {
      margin-top: 5px;
	  margin-bottom: 3px;
      font-style: italic;
      color: #ad1457;
      min-height: 22px;
      text-align: center;
      font-size: 1rem;
      user-select: none;
    }


    /* Responsive cho ƒëi·ªán tho·∫°i */
    @media (max-width: 600px) {
      body {
        padding: 15px 10px;
      }
      #editor {
        height: 600px;
        font-size: 15px;
        padding: 15px;
      }
      h2 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <h2>üß∏ Mai H·∫£i L√Ω üß∏</h2>
  <div id="secret-line" style="display: none; margin: 3px 0; text-align: center; font-size: 14px; margin-top: 0px; margin-bottom: 5px;">
  <div style="margin-bottom: 5px;">
    <a href="https://docs.google.com/document/d/1pAIbmT3MGtqHufTUhpxLjRZtD-TAcaaiMFOx8sBAr7o/edit?tab=t.0" target="_blank" style="color: #d81b60; font-weight: bold; text-decoration: none;">
       Link Doc n√® 
    </a>
  </div>
    <div>
    <a href="https://drive.google.com/drive/folders/1iogoIHCHPtZNwClehNV4xmeFDcOwJ-SG" target="_blank" style="color: #d81b60; font-weight: bold; text-decoration: none;">
       Link GG Drive n√®
    </a>
   </div>
   </div>


  <div id="password-box" style="margin-bottom: 15px; text-align: center;">
      <input type="password" id="password-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ xem" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;" />
      <button onclick="checkPassword()" style="padding: 5px 10px; margin-left: 5px; border-radius: 5px; background-color: #ec407a; color: white; border: none;">X√°c nh·∫≠n</button>
  </div>

  <div id="status">ƒêang t·∫£i d·ªØ li·ªáu...</div>
  <div id="editor" contenteditable="true" spellcheck="true" aria-label="√î nh·∫≠p ghi ch√∫"></div>

  <!-- Firebase SDK (compat ƒë·ªÉ d·ªÖ d√πng v·ªõi file HTML) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    // Thay b·∫±ng config Firebase c·ªßa b·∫°n l·∫•y t·ª´ Firebase Console nh√©!
    const firebaseConfig = {
      apiKey: "AIzaSyClQYXipNA3AHHgyyXzX17_WrHxEvmGaEQ",
      authDomain: "hailyne.firebaseapp.com",
      projectId: "hailyne",
      storageBucket: "hailyne.firebasestorage.app",
      messagingSenderId: "1061846186715",
      appId: "1:1061846186715:web:3180b063799e792a88aafe"
    };


    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const editor = document.getElementById('editor');
    const status = document.getElementById('status');
    const docRef = db.collection('notes').doc('myNote');
	

    // Load d·ªØ li·ªáu ƒë√£ l∆∞u l√™n √¥ nh·∫≠p li·ªáu
    docRef.get().then(doc => {
      if(doc.exists) {
        editor.innerHTML = doc.data().content;
        status.textContent = 'N·ªôi dung ƒë√£ ƒë∆∞·ª£c t·∫£i';
      } else {
        status.textContent = 'Ch∆∞a c√≥ n·ªôi dung l∆∞u, h√£y b·∫Øt ƒë·∫ßu ghi ch√∫ nh√©!';
      }
    }).catch(err => {
      status.textContent = 'L·ªói t·∫£i d·ªØ li·ªáu, vui l√≤ng th·ª≠ l·∫°i.';
      console.error(err);
    });

    // T·ª± ƒë·ªông l∆∞u sau 1 gi√¢y d·ª´ng g√µ
    let timer;
    editor.addEventListener('input', () => {
      status.textContent = 'ƒêang ch·ªù l∆∞u... üíæ';
      clearTimeout(timer);
      timer = setTimeout(() => {
        docRef.set({ content: editor.innerHTML })
          .then(() => {
            status.textContent = 'ƒê√£ l∆∞u th√†nh c√¥ng! üå∏';
          })
          .catch(err => {
            status.textContent = 'L·ªói khi l∆∞u d·ªØ li·ªáu.';
            console.error(err);
          });
      }, 1000);	  
    });
	
	  function checkPassword() {
      const input = document.getElementById('password-input').value;
      const secretDiv = document.getElementById('secret-line');

     // Thay 'matkhaucuaban' b·∫±ng m·∫≠t kh·∫©u th·∫≠t b·∫°n mu·ªën
     if (input === 'haily000') {
       secretDiv.style.display = 'block';
     } else {
       alert('Sai m·∫≠t kh·∫©u!');
     }
     }
  </script>
</body>
</html>
